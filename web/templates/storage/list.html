{% extends "base_AdminLTE.html"%}
{% block title %}Docklet | Storage{% endblock %}

{% block panel_title %}Storage{% endblock %}

{% block panel_list %}
<ol class="breadcrumb">
  <li>
      <a href="/dashboard/"><i class="fa fa-dashboard"></i>Home</a>
  </li>
  <li class="active">
      <strong>Storage</strong>
  </li>
</ol>
{% endblock %}
{% block content %}
<div class="row">
         <div class="col-lg-12">
           <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title">Storage</h3>

                  <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                  </div>
                </div>
                <div class="box-body">
                     <p>
					 <button type="button" data-toggle="modal" data-target="#CreateDataset" class="btn btn-primary btn-sm"><i class="fa fa-plus"></i> Create Dataset</button>
					 </p>
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th>DataSet</th>
                            <th>Type</th>
                            <th>Update Time</th>
                            <th>Version</th>
                            <th>Size</th>
                            <th>Operation</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for dataset in all_dataset %}
                        <tr>
                            <th>{{ dataset['name'] }}</th>
                            <th>{{ dataset['type'] }}</th>
                            <th>{{ dataset['update_time'] }}</th>
                            <th>{{ dataset['version'] }}</th>
                            <th>{{ dataset['size'] }}</th>
                            <th>
                                {% if dataset['status'] == 'imported' %}
                                <button type="button" class="btn btn-xs btn-default">&nbsp;Import&nbsp;</button>
                                    {% if dataset['type'] == 'private' %}
                                    <a href="/storage/{{ dataset['name'] }}/update">
                                        <button type="button" class="btn btn-xs btn-info">&nbsp;Update&nbsp;</button>
                                    </a>
                                    {% else %}
                                    <button type="button" class="btn btn-xs btn-default">&nbsp;Update&nbsp;</button>
                                    {% endif %}
                                {% else %}
                                <a href="/storage/{{ dataset['name'] }}/import">
                                    <button type="button" class="btn btn-xs btn-success">&nbsp;Import&nbsp;</button>
                                </a>
                                <button type="button" class="btn btn-xs btn-default">&nbsp;Update&nbsp;</button>
                                {% endif %}
                                <a href="/storage/{{ dataset['name'] }}/delete">
                                    <button type="button" class="btn btn-xs btn-danger">&nbsp;Delete&nbsp;</button>
                                </a>
                                {% if dataset['type'] == 'private' %}
                                <a href="/storage/{{ dataset['name'] }}/share">
                                    <button type="button" class="btn btn-xs btn-success">&nbsp;Share&nbsp;</button>
                                </a>
                                {% endif %}
                            </th>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="modal inmodal" id="CreateDataset" tabindex="-1" role="dialog" aria-hidden="true">
             <div class="modal-dialog">
             <div class="modal-content animated fadeIn">
                     <div class="modal-header">
                         <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                         <h4 class="modal-title">Create a dataset in Docklet cloud storage.</h4>
                     </div>
                     <div class="modal-body">
                       <form action="/storage/create/" method="POST" id="storageCreateForm">
                          <div class="form-group">
                            <label>Number</label><small class="font-bold"> How many beans do you need?</small>
                            <input type="number" class="form-control" placeholder="100-5000" name="number" id="number" min="100" max="5000" required />
                          </div>
                          <div class="form-group">
                            <label>Reason</label>
                            <textarea class="form-control" name="reason" cols="28" rows="5" onKeyDown="textCounter(reason,remLen,300);" onKeyUp="textCounter(reason,remLen,300);" placeholder="Please describe what you will do in your workspace with the beans."></textarea>
			     You could only input <input name="remLen" type="text" value="300" size="3" readonly="readonly"> more characters.
                          </div>

                     <div class="modal-footer">
                         <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                         <button type="submit" class="btn btn-primary">Submit</button>
                     </div>
                       </form>
                     </div>
             </div>
             </div>
           </div>
                </div>
             </div>
         </div>
	</div>

{% endblock %}
{% block script_src %}

<script src="http://cdn.bootcss.com/datatables/1.10.11/js/jquery.dataTables.js"></script>
<script src="http://cdn.bootcss.com/datatables/1.10.11/js/dataTables.bootstrap.js"></script>
<script src="http://cdn.bootcss.com/datatables-tabletools/2.1.5/js/TableTools.min.js"></script>
<script src="https://cdn.bootcss.com/jquery-validate/1.17.0/jquery.validate.js"></script>

<script>
         $().ready(function() {
             $("#storageCreateForm").validate();
         });
 </script>
{% endblock %}
